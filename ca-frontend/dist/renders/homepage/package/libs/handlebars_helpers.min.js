"undefined"!=typeof Handlebars?(Handlebars.registerHelper("escapeUrl",function(e){return!e||e.length<1?"":encodeURIComponent(e)}),Handlebars.registerHelper("dynamicTemplate",function(e,r,n){e===!1&&(e=n["@type"]),r?n.renderTypes=r:r=n.renderTypes;var a,t=e.substring(e.lastIndexOf("/")+1,e.length);for(var i in r)if(t===r[i]){a=Handlebars.partials[i].length?Handlebars.partials[i]:Handlebars.template(Handlebars.partials[i]);break}return a?new Handlebars.SafeString(a(n)):"Template matching id: "+e+" not found"}),Handlebars.registerHelper("bannerConfig",function(e){hex=this.bannerColor||"#fff",alpha=this.bannerOpacity||1,hex=hex.replace("#","");var r=parseInt(3==hex.length?hex.slice(0,1).repeat(2):hex.slice(0,2),16),n=parseInt(3==hex.length?hex.slice(1,2).repeat(2):hex.slice(2,4),16),a=parseInt(3==hex.length?hex.slice(2,3).repeat(2):hex.slice(4,6),16);return alpha?"background-color:rgba("+r+", "+n+", "+a+", "+alpha+"); ":"background-color:rgb("+r+", "+n+", "+a+"); "}),Handlebars.registerHelper("roundelConfig",function(e){if(e&&e[0]&&e[0].roundel&&e[0].roundel.name){var r="";switch(e[0].roundelPosition){case"Bottom Right":r="p1_img=";break;case"Bottom Left":r="p2_img=";break;case"Top Left":r="p3_img=";break;case"Top Right":r="p4_img="}var n=e[0].roundelRatio;return r+e[0].roundel.name+(n?"&roundelRatio="+n:"")}return""}),Handlebars.registerHelper("splitBlock",function(e,r){if(void 0===r)return"";var n=parseInt(e,10),a=r.split("/");return 0===n?"amp-ca-size-"+a[0]:"amp-ca-size-"+a[1]}),Handlebars.registerHelper("iff",function(e,r,n,a){var t=!1;switch(r){case"==":t=e==n;break;case">":t=e>n;break;case"<":t=e<n;break;default:throw"Unknown operator "+r}return t?a.fn(this):a.inverse(this)}),Handlebars.registerHelper("roundelProperties",function(e){return this.roundel&&this.roundel[0]&&this.roundel[0].roundel&&this.roundel[0].roundelPosition&&this.roundel[0].roundelRatio?e.fn(this):e.inverse(this)}),Handlebars.registerHelper("showdown",function(e){if("undefined"==typeof showdown)return"Showdown text fromatting plugin is not initialized";var r=new showdown.Converter({noHeaderId:!0,simpleLineBreaks:!0}),e=r.makeHtml(e);return void 0===e&&(e=""),new Handlebars.SafeString(r.makeHtml(e))}),Handlebars.registerHelper("ampCaVideo",function(){var e=" data-is-firefox=";e+=+!!(window.navigator.userAgent.indexOf("Firefox")>=0);var r='<script type="text/plain" class="video-settings"'+e+" ></script>";return new Handlebars.SafeString(r)}),Handlebars.registerHelper("math",function(e,r,n,a){return e=parseFloat(e),n=parseFloat(n),{"+":e+n,"-":e-n,"*":e*n,"/":e/n,"%":e%n}[r]}),Handlebars.registerHelper("csv",function(e,r){var n=e.split(",");return"M"===r?void 0!==n[1]&&0!=n[1]?n[1]:void 0!==n[0]&&0!=n[0]?n[0]:"000000":"D"===r&&void 0!==n[0]&&0!=n[0]?n[0]:"000000"}),Handlebars.registerHelper("finance",function(e,r){var n=e.match(/([1-9])+/g);return"UK"===r?"&pound;"+Math.floor(100*parseFloat(n[0]/48))/100+" a month for 4 years":"&euro;"+Math.floor(100*parseFloat(n[0]/36))/100+" a month for 3 years"}),Handlebars.registerHelper("times",function(e,r){for(var n="",a=0;a<e;++a)r.data.index=a,r.data.first=0===a,r.data.last=a===e-1,n+=r.fn(this);return n}),Handlebars.registerHelper("inc",function(e,r){return parseInt(e)+1}),Handlebars.registerHelper("getWidth",function(e,r){if("Type_A"===e)switch(r){case"M":return"255";case"D4":return"213";case"D6":return"291"}if("Type_B"===e)switch(r){case"M":return"255";case"D4":return"294";case"D6":return"401"}if("Type_C"===e||"Type_D"===e)switch(r){case"M":return"540";case"D4":return"456";case"D6":return"622"}if("Type_E"===e)switch(r){case"M":return"151";case"D4":return"151";case"D6":return"151"}})):console.warn("Handlebars is not defined, please make sure you included Handlebars library");